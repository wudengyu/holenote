<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:include="base :: common_header(~{::title},_)">
    <title>用户管理</title>
</head>

<body>
    <header th:replace="~{base::header}"></header>
    <h2>用户管理</h2>
    <div class="container-md mt-3">
        <form class="row g-3" method="POST" th:action="@{/manage/user}" th:object="${queryUserForm}">
            <div class="col-auto">
                <label for="username" class="col-form-label">用户名</label>
            </div>
            <div class="col-auto">
                <input type="text" class="form-control" th:field="*{username}"></input>
            </div>
            <div class="col-auto">
                <label for="district_code" class="col-form-label">行政区划</label>
            </div>
            <div class="col-auto">
                <select class="form-select" th:field="*{district_code}" required>
                    <option value="000000"></option>
                    <option th:each="district:${districtList}" th:value="${district.code}" th:text="${district.name}">
                    </option>
                </select>
            </div>
            <div class="col-auto">
                <label for="organization_id" class="col-form-label">单位</label>
            </div>
            <div class="col-auto">
                <select class="form-select" th:field="*{organization_id}">
                    <option value="0"></option>
                    <option th:each="organization:${organizationList}" th:value="${organization.id}"
                        th:text="${organization.name}">
                    </option>
                </select>
            </div>
            <div class="col-auto">
                <button class="btn btn-outline-dark me-3" type="submit">查询</button>
            </div>
        </form>
    </div>
    <div class="container-md mt-3">
        <table class="table table-bordered table-hover" th:if="${users}">
            <thead>
                <tr>
                    <th>用户名</th>
                    <th>行政区域</th>
                    <th>单位</th>
                    <th>真实姓名</th>
                    <th>联系电话</th>
                    <th>状态</th>
                </tr>
            </thead>
            <tr th:each="user:${users}" th:data="*{user.id}">
                <td th:text="*{user.username}"></td>
                <td th:text="*{user.district.name}"></td>
                <td th:text="*{user.organization.name}"></td>
                <td th:text="*{user.realname}"></td>
                <td th:text="*{user.telephone}"></td>
                <td th:text="*{user.enabled}"></td>
            </tr>
        </table>
        <ul class="pagination justify-content-end">
            <!-- 首页 -->
            <li class="page-item">
                <a class="page-link" th:href="@{/manage/user?page=0}">首页</a>
            </li>
            <!-- 上一页 -->
            <li class="page-item" th:if="${users.hasPrevious()}">
                <a class="page-link"
                    th:href="@{'/manage/users?page=' + ${users.previousPageable().getPageNumber()}}"
                    th:text="上一页"></a>
            </li>
            <!-- 中间页 -->
            <li class="page-item" th:each="pageNum:${#numbers.sequence(0, users.getTotalPages() - 1)}"
                th:classappend="${pageNum eq users.pageable.getPageNumber()}?'active'">
                <a class="page-link" th:href="@{'/manage/user?page=' + ${pageNum}}"
                    th:text="${pageNum + 1}"></a>
            </li>
            <!-- 下一页 -->
            <li class="page-item" th:if="${users.hasNext()}">
                <a class="page-link"
                    th:href="@{'/manage/user?page=' + ${users.nextPageable().getPageNumber()}}"
                    th:text="下一页"></a>
            </li>
            <!-- 尾页 -->
            <li class="page-item">
                <a class="page-link"
                    th:href="@{'/manage/user?page=' + ${users.getTotalPages() - 1}}">尾页</a>
            </li>
        </ul>

    </div>
    <footer th:replace="~{base::footer}"></footer>
</body>

</html>